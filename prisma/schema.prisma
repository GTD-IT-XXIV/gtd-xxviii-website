datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}


enum PaymentStatus {
  PENDING
  PAID
  CANCELED
  FAILED
}

model Registration {
  id                 String        @id @default(auto()) @map("_id") @db.ObjectId
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt

  teamName           String
  captainName        String
  telegram           String
  phone              String
  email              String

  member1            String       
  member2            String
  member3            String
  member4            String
  member5            String?

  timeSlot           String?        @unique
  bundleId           String

  paymentStatus      PaymentStatus  @default(PENDING)
  amountCents        Int
  currency           String         @default("sgd")

  stripeSessionId        String?
  stripePaymentIntentId  String?

  bundleHoldUntil    DateTime?
  slotHoldUntil      DateTime? 

  @@index([stripeSessionId])
  @@index([stripePaymentIntentId])
  @@index([slotHoldUntil])
}

